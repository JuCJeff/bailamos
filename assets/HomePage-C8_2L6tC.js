import{r as h,j as e,T as A,L as K,e as D,P as I,f as $}from"./react-CxQfEXQ1.js";import{B as k,c as x,C as y,a as _,b as L,d as S,e as O,f as G,g as H,H as B}from"./card-DlKfEtsT.js";import{g as W,c as q}from"./firebase-JXYPez0V.js";import{u as R,G as U,M as z,I as J}from"./google-maps-C1MYJ28T.js";import{m as F,t as V}from"./event-Cf9_RtTC.js";import{aW as Q}from"./vendor-C9WekQ6T.js";import"./shadcn-ui-BA32w1ww.js";import"./index-iypHcL-N.js";const w={lat:43.0722,lng:-89.4008},X=({location:r})=>{const[t,n]=h.useState(!1),s={lat:r.lat??w.lat,lng:r.lng??w.lng},{isLoaded:a}=R({googleMapsApiKey:"AIzaSyBuImOK6KWeeg3f71cgw6R-ssJj4arkAjk"}),i=()=>{window.open(r.googleMapsUrl,"_blank","noopener,noreferrer")};return a?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-md font-bold",children:"Location"}),e.jsx(k,{variant:"link",className:"text-md",onClick:i,children:r.propertyName}),e.jsx("div",{className:"w-full h-72 rounded-md border mt-4",children:e.jsxs(U,{center:s,zoom:15,mapContainerClassName:"w-full h-full rounded-2xl",options:F,children:[e.jsx(z,{position:{lat:s.lat,lng:s.lng},onClick:()=>n(!0)}),t&&e.jsx(J,{position:{lat:s.lat,lng:s.lng},onCloseClick:()=>n(!1),children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"font-semibold text-md text-primary",children:r.propertyName}),e.jsx("p",{className:"text-sm text-gray-500",children:r.address}),r.city&&r.state&&e.jsxs("p",{className:"text-sm text-gray-400",children:[r.city,", ",r.state]}),e.jsx("a",{href:r.googleMapsUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline text-sm",children:"View on Google Maps"})]})})]})})]}):e.jsx("p",{children:"Loading map..."})},Y={light:"",dark:".dark"},T=h.createContext(null);function P(){const r=h.useContext(T);if(!r)throw new Error("useChart must be used within a <ChartContainer />");return r}function Z({id:r,className:t,children:n,config:s,...a}){const i=h.useId(),c=`chart-${r||i.replace(/:/g,"")}`;return e.jsx(T.Provider,{value:{config:s},children:e.jsxs("div",{"data-slot":"chart","data-chart":c,className:x("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",t),...a,children:[e.jsx(ee,{id:c,config:s}),e.jsx(D,{children:n})]})})}const ee=({id:r,config:t})=>{const n=Object.entries(t).filter(([,s])=>s.theme||s.color);return n.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(Y).map(([s,a])=>`
${a} [data-chart=${r}] {
${n.map(([i,c])=>{var l;const d=((l=c.theme)==null?void 0:l[s])||c.color;return d?`  --color-${i}: ${d};`:null}).join(`
`)}
}
`).join(`
`)}}):null},re=A;function te({active:r,payload:t,className:n,indicator:s="dot",hideLabel:a=!1,hideIndicator:i=!1,label:c,labelFormatter:d,labelClassName:l,formatter:C,color:M,nameKey:E,labelKey:j}){const{config:f}=P(),N=h.useMemo(()=>{var m;if(a||!(t!=null&&t.length))return null;const[o]=t,v=`${j||(o==null?void 0:o.dataKey)||(o==null?void 0:o.name)||"value"}`,g=b(f,o,v),u=!j&&typeof c=="string"?((m=f[c])==null?void 0:m.label)||c:g==null?void 0:g.label;return d?e.jsx("div",{className:x("font-medium",l),children:d(u,t)}):u?e.jsx("div",{className:x("font-medium",l),children:u}):null},[c,d,t,a,l,f,j]);if(!r||!(t!=null&&t.length))return null;const p=t.length===1&&s!=="dot";return e.jsxs("div",{className:x("border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",n),children:[p?null:N,e.jsx("div",{className:"grid gap-1.5",children:t.map((o,v)=>{const g=`${E||o.name||o.dataKey||"value"}`,u=b(f,o,g),m=M||o.payload.fill||o.color;return e.jsx("div",{className:x("[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5",s==="dot"&&"items-center"),children:C&&(o==null?void 0:o.value)!==void 0&&o.name?C(o.value,o.name,o,v,o.payload):e.jsxs(e.Fragment,{children:[u!=null&&u.icon?e.jsx(u.icon,{}):!i&&e.jsx("div",{className:x("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":s==="dot","w-1":s==="line","w-0 border-[1.5px] border-dashed bg-transparent":s==="dashed","my-0.5":p&&s==="dashed"}),style:{"--color-bg":m,"--color-border":m}}),e.jsxs("div",{className:x("flex flex-1 justify-between leading-none",p?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[p?N:null,e.jsx("span",{className:"text-muted-foreground",children:(u==null?void 0:u.label)||o.name})]}),o.value&&e.jsx("span",{className:"text-foreground font-mono font-medium tabular-nums",children:o.value.toLocaleString()})]})]})},o.dataKey)})})]})}const se=K;function ne({className:r,hideIcon:t=!1,payload:n,verticalAlign:s="bottom",nameKey:a}){const{config:i}=P();return n!=null&&n.length?e.jsx("div",{className:x("flex items-center justify-center gap-4",s==="top"?"pb-3":"pt-3",r),children:n.map(c=>{const d=`${a||c.dataKey||"value"}`,l=b(i,c,d);return e.jsxs("div",{className:x("[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3"),children:[l!=null&&l.icon&&!t?e.jsx(l.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:c.color}}),e.jsx("span",{children:l==null?void 0:l.label})]},c.value)})}):null}function b(r,t,n){if(typeof t!="object"||t===null)return;const s="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let a=n;return n in t&&typeof t[n]=="string"?a=t[n]:s&&n in s&&typeof s[n]=="string"&&(a=s[n]),a in r?r[a]:r[n]}function ae(r){return V.find(t=>t.name===r.name)||null}const oe=({musicList:r})=>{const t=r.filter(s=>s.percentage>0).map(s=>{const a=ae(s);return a?{key:s.name.toLowerCase().replace(/\s+/g,"_"),label:s.name,value:s.percentage,fill:a.bgColor}:null}).filter(Boolean),n=t.reduce((s,a)=>(s[a.key]={label:a.label,color:a.fill},s),{});return e.jsxs(y,{className:"flex flex-col mt-6",children:[e.jsx(_,{className:"items-center pb-0",children:e.jsx(L,{children:"Music Percentages"})}),e.jsx(S,{className:"flex-1 pb-0",children:e.jsx(Z,{config:n,className:"mx-auto aspect-square max-h-[300px]",children:e.jsxs(I,{children:[e.jsx(re,{content:e.jsx(te,{nameKey:"label"})}),e.jsx($,{data:t,dataKey:"value",nameKey:"label",cx:"50%",cy:"50%",outerRadius:"80%"}),e.jsx(se,{content:e.jsx(ne,{nameKey:"key"}),className:"-translate-y-2 flex-wrap gap-2 [&>*]:basis-1/4 [&>*]:justify-center"})]})})})]})},le=({event:r})=>{var a;const t={title:r.title,description:r.description?r.description:"",start:r.startTime,end:r.endTime,location:((a=r.location)==null?void 0:a.address)??""},n=Q(t),s=()=>{window.open(n,"_blank","noopener,noreferrer")};return e.jsx("div",{className:"mt-2",children:e.jsx(k,{onClick:s,children:"Add to Google Calendar"})})},ce=({link:r})=>{const t=()=>{window.open(r,"_blank","noopener,noreferrer")};return e.jsx(k,{variant:"link",onClick:t,className:"text-md",children:"Event Details"})},ie=({social:r})=>{const t=r.musicPercentages?Object.values(r.musicPercentages).filter(n=>n.percentage>0).sort((n,s)=>s.percentage-n.percentage):[];return e.jsxs(y,{className:"break-inside-avoid mb-4 mx-2 shadow hover:border-yellow-500 hover:shadow-[0_0_1em_rgba(255,223,0,0.6)] transition-all duration-250 ease-in-out",children:[e.jsxs(_,{children:[e.jsx(L,{className:"text-2xl",children:r.title}),e.jsx(O,{children:r.startTime.toLocaleString()})]}),e.jsxs(S,{children:[r.imageUrl&&e.jsx("img",{src:r.imageUrl,alt:r.title,className:"w-full rounded mt-2"}),e.jsx("div",{className:"text-center my-4",children:r.description}),r.location&&e.jsx(X,{location:r.location}),t.length>0&&e.jsx(oe,{musicList:t}),r.link&&e.jsx(ce,{link:r.link}),e.jsx(le,{event:r})]}),e.jsx(G,{children:e.jsxs("p",{children:["Posted at ",r.createdAt.toLocaleString()]})})]})},de=()=>{const[r,t]=h.useState([]),[n,s]=h.useState(!0);return h.useEffect(()=>{(async()=>{try{const c=(await W(q(H,"events"))).docs.map(d=>{const l=d.data();return{id:d.id,...l,createdAt:l.createdAt.toDate(),startTime:l.startTime.toDate(),endTime:l.endTime.toDate()}});console.log(c),t(c)}catch(i){console.error("Error fetching events:",i)}finally{s(!1)}})()},[]),n?e.jsx("p",{children:"Loading events..."}):e.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:r.map(a=>e.jsx(ie,{social:a},a.id))})};function ve(){return e.jsxs("div",{children:[e.jsx(B,{}),e.jsx(de,{})]})}export{ve as default};
