import{r as d,j as e,u as b}from"./index-BVgBzDmY.js";import{c as Z,a as fe,b as pe,j as R,u as _,P as D,d as y,e as I,k as he,l as je,m as we,S as ve,n as Ne,F as ye,D as De,v as Pe,g as h,B as N,I as f,H as be}from"./HeadBar-DOZSPuws.js";import{I as Ee,a as E,b as A,J as C,K as Ce,M as Se,w as Re,t as _e,N as Ie,O as Ae,P as Fe,f as F,C as p,L as j,Q as Te,T as ke,h as B,i as H,j as U,k as J,D as Le,E as Oe,G as z,H as q}from"./index-CqhLcnm2.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],S=Z("LoaderCircle",Me);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qe=Z("X",ze);var T="Dialog",[K,ys]=pe(T),[$e,x]=K(T),X=s=>{const{__scopeDialog:t,children:r,open:a,defaultOpen:o,onOpenChange:n,modal:c=!0}=s,i=d.useRef(null),l=d.useRef(null),[u=!1,g]=fe({prop:a,defaultProp:o,onChange:n});return e.jsx($e,{scope:t,triggerRef:i,contentRef:l,contentId:R(),titleId:R(),descriptionId:R(),open:u,onOpenChange:g,onOpenToggle:d.useCallback(()=>g(m=>!m),[g]),modal:c,children:r})};X.displayName=T;var Q="DialogTrigger",Y=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,o=x(Q,r),n=_(t,o.triggerRef);return e.jsx(D.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":O(o.open),...a,ref:n,onClick:y(s.onClick,o.onOpenToggle)})});Y.displayName=Q;var k="DialogPortal",[Ge,ee]=K(k,{forceMount:void 0}),se=s=>{const{__scopeDialog:t,forceMount:r,children:a,container:o}=s,n=x(k,t);return e.jsx(Ge,{scope:t,forceMount:r,children:d.Children.map(a,c=>e.jsx(I,{present:r||n.open,children:e.jsx(he,{asChild:!0,container:o,children:c})}))})};se.displayName=k;var P="DialogOverlay",te=d.forwardRef((s,t)=>{const r=ee(P,s.__scopeDialog),{forceMount:a=r.forceMount,...o}=s,n=x(P,s.__scopeDialog);return n.modal?e.jsx(I,{present:a||n.open,children:e.jsx(We,{...o,ref:t})}):null});te.displayName=P;var We=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,o=x(P,r);return e.jsx(we,{as:ve,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(D.div,{"data-state":O(o.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),w="DialogContent",ae=d.forwardRef((s,t)=>{const r=ee(w,s.__scopeDialog),{forceMount:a=r.forceMount,...o}=s,n=x(w,s.__scopeDialog);return e.jsx(I,{present:a||n.open,children:n.modal?e.jsx(Ve,{...o,ref:t}):e.jsx(Ze,{...o,ref:t})})});ae.displayName=w;var Ve=d.forwardRef((s,t)=>{const r=x(w,s.__scopeDialog),a=d.useRef(null),o=_(t,r.contentRef,a);return d.useEffect(()=>{const n=a.current;if(n)return je(n)},[]),e.jsx(re,{...s,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:y(s.onCloseAutoFocus,n=>{var c;n.preventDefault(),(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:y(s.onPointerDownOutside,n=>{const c=n.detail.originalEvent,i=c.button===0&&c.ctrlKey===!0;(c.button===2||i)&&n.preventDefault()}),onFocusOutside:y(s.onFocusOutside,n=>n.preventDefault())})}),Ze=d.forwardRef((s,t)=>{const r=x(w,s.__scopeDialog),a=d.useRef(!1),o=d.useRef(!1);return e.jsx(re,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var c,i;(c=s.onCloseAutoFocus)==null||c.call(s,n),n.defaultPrevented||(a.current||(i=r.triggerRef.current)==null||i.focus(),n.preventDefault()),a.current=!1,o.current=!1},onInteractOutside:n=>{var l,u;(l=s.onInteractOutside)==null||l.call(s,n),n.defaultPrevented||(a.current=!0,n.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=n.target;((u=r.triggerRef.current)==null?void 0:u.contains(c))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&o.current&&n.preventDefault()}})}),re=d.forwardRef((s,t)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:n,...c}=s,i=x(w,r),l=d.useRef(null),u=_(t,l);return Ne(),e.jsxs(e.Fragment,{children:[e.jsx(ye,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:n,children:e.jsx(De,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":O(i.open),...c,ref:u,onDismiss:()=>i.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Be,{titleId:i.titleId}),e.jsx(Ue,{contentRef:l,descriptionId:i.descriptionId})]})]})}),L="DialogTitle",oe=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,o=x(L,r);return e.jsx(D.h2,{id:o.titleId,...a,ref:t})});oe.displayName=L;var ne="DialogDescription",ie=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,o=x(ne,r);return e.jsx(D.p,{id:o.descriptionId,...a,ref:t})});ie.displayName=ne;var le="DialogClose",ce=d.forwardRef((s,t)=>{const{__scopeDialog:r,...a}=s,o=x(le,r);return e.jsx(D.button,{type:"button",...a,ref:t,onClick:y(s.onClick,()=>o.onOpenChange(!1))})});ce.displayName=le;function O(s){return s?"open":"closed"}var de="DialogTitleWarning",[Ds,ue]=Pe(de,{contentName:w,titleName:L,docsSlug:"dialog"}),Be=({titleId:s})=>{const t=ue(de),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{s&&(document.getElementById(s)||console.error(r))},[r,s]),null},He="DialogDescriptionWarning",Ue=({contentRef:s,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ue(He).contentName}}.`;return d.useEffect(()=>{var n;const o=(n=s.current)==null?void 0:n.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(a))},[a,s,t]),null},Je=X,Ke=Y,Xe=se,Qe=te,Ye=ae,es=oe,ss=ie,ge=ce;function ts({...s}){return e.jsx(Je,{"data-slot":"dialog",...s})}function as({...s}){return e.jsx(Ke,{"data-slot":"dialog-trigger",...s})}function rs({...s}){return e.jsx(Xe,{"data-slot":"dialog-portal",...s})}function os({...s}){return e.jsx(ge,{"data-slot":"dialog-close",...s})}function ns({className:s,...t}){return e.jsx(Qe,{"data-slot":"dialog-overlay",className:h("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",s),...t})}function is({className:s,children:t,...r}){return e.jsxs(rs,{"data-slot":"dialog-portal",children:[e.jsx(ns,{}),e.jsxs(Ye,{"data-slot":"dialog-content",className:h("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...r,children:[t,e.jsxs(ge,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(qe,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function $({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-header",className:h("flex flex-col gap-2 text-center sm:text-left",s),...t})}function G({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-footer",className:h("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function W({className:s,...t}){return e.jsx(es,{"data-slot":"dialog-title",className:h("text-lg leading-none font-semibold",s),...t})}function V({className:s,...t}){return e.jsx(ss,{"data-slot":"dialog-description",className:h("text-muted-foreground text-sm",s),...t})}const M=s=>{switch(s){case"auth/email-already-in-use":return"This email is already in use. Please try another one";case"auth/weak-password":return"Password should be at least 6 characters";case"auth/user-not-found":return"No user found with this email address. Please sign up for an account";case"auth/invalid-credential":return"Invalid credentials. Please try again";case"auth/wrong-password":return"Incorrect password. Please try again";case"auth/too-many-requests":return"Too many login attempts. Please try again later";default:return"An error occurred. Please try again"}},ls=()=>{const[s,t]=d.useState(!1),[r,a]=d.useState(null),o=b();return{loading:s,error:r,handleEmailLogin:async c=>{try{const{email:i,password:l}=c,m=await(await Ee(E,i,l)).user.getIdToken();A.set("auth_token",m,{expires:30,secure:!0}),o("/organizer")}catch(i){i instanceof C?(console.error("Firebase error:",i.message),a(M(i.code))):i instanceof Error?(console.error("Error:",i.message),a("An error occurred, please try again")):(console.error("An unknown error occurred",i),a("Something went wrong. Please try again later."))}finally{t(!1)}}}},cs=()=>{const[s,t]=d.useState(!1),[r,a]=d.useState(null),o=b();return{loading:s,error:r,handleEmailSignup:async c=>{t(!0),a(null);const{email:i,password:l,firstName:u,lastName:g}=c;try{const v=(await Ce(E,i,l)).user;await Se(Re(_e,"organizers",v.uid),{userId:v.uid,email:v.email,firstName:u,lastName:g,createdAt:new Date});const xe=await v.getIdToken();A.set("auth_token",xe,{expires:30}),o("/organizer")}catch(m){m instanceof C?(console.error("Firebase error:",m.message),a(M(m.code))):m instanceof Error?(console.error("Error:",m.message),a("An error occurred, please try again")):(console.error("An unknown error occurred",m),a("Something went wrong. Please try again later."))}finally{t(!1)}}}},ds=()=>{const[s,t]=d.useState(!1),[r,a]=d.useState(null),[o,n]=d.useState(!1),c=b();return{loading:s,error:r,success:o,handleGoogleLogin:async()=>{t(!0),a(null);const l=new Ie;try{const g=(await Ae(E,l)).user;if(g.uid){const v=await g.getIdToken();A.set("auth_token",v,{expires:30,secure:!0}),n(!0),c("/organizer")}}catch(u){u instanceof C?(console.error("Firebase error:",u.message),a("Failed to log in with Google, please try again")):u instanceof Error?(console.error("Error:",u.message),a("An error occurred, please try again")):(console.error("An unknown error occurred",u),a("Something went wrong. Please try again later."))}finally{t(!1)}}}},us=()=>{const[s,t]=d.useState(null),[r,a]=d.useState(!1),o=b();return{loading:r,error:s,handlePasswordResetEmail:async c=>{const{email:i}=c;try{a(!0),t(null),await Fe(E,i),o("/login")}catch(l){l instanceof C?t(M(l.code)):t("An unexpected error occurred. Please try again"),console.error("Error:",l)}finally{a(!1)}}}},gs=()=>{const{control:s,handleSubmit:t,formState:{errors:r}}=F(),{loading:a,error:o,handlePasswordResetEmail:n}=us(),[c,i]=d.useState(!1),l=async g=>{await n(g),i(!0)},u=g=>{g.stopPropagation(),t(l)(g)};return e.jsxs(ts,{children:[e.jsx(as,{asChild:!0,children:e.jsx(N,{variant:"link",children:"Forgot your password?"})}),e.jsx(is,{className:"sm:max-w-[425px]",children:c?e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsx(W,{children:"Reset Password"}),e.jsx(V,{children:"Check your inbox for a password reset email!"})]}),e.jsx(G,{children:e.jsx(os,{asChild:!0,children:e.jsx(N,{variant:"ghost",children:"Close"})})})]}):e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsx(W,{children:"Reset Password"}),e.jsx(V,{children:"Enter your registered email for a password reset"})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"items-center mb-4",children:[e.jsx(p,{name:"email",control:s,defaultValue:"",rules:{required:"Email is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,message:"Invalid email address"}},render:({field:g})=>e.jsx(f,{...g,id:"email",placeholder:"Email"})}),r.email&&e.jsx("p",{className:"text-red-500 text-sm text-start mt-2",children:r.email.message})]}),o&&e.jsx("p",{className:"text-red-500 text-sm text-start mt-2",children:o}),e.jsx(G,{children:e.jsx(N,{type:"submit",children:a?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"animate-spin"}),"Please wait"]}):"Send Reset Email"})})]})]})})]})},ms=()=>{const{control:s,handleSubmit:t,formState:{errors:r}}=F(),{loading:a,error:o,handleEmailLogin:n}=ls(),c=async i=>{await n(i)};return e.jsx("form",{onSubmit:t(c),children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(p,{name:"email",control:s,defaultValue:"",rules:{required:"Email is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,message:"Invalid email address"}},render:({field:i})=>e.jsx(f,{...i,id:"email",type:"email",placeholder:"m@example.com",required:!0})}),r.email&&e.jsx("p",{className:"text-red-500 text-sm text-start",children:r.email.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{htmlFor:"password",children:"Password"}),e.jsx(gs,{})]}),e.jsx(p,{name:"password",control:s,defaultValue:"",rules:{required:"Password is required"},render:({field:i})=>e.jsx(f,{...i,id:"password",type:"password",required:!0})}),r.password&&e.jsx("p",{className:"text-red-500 text-sm text-start",children:r.password.message})]}),e.jsx(N,{type:"submit",className:"w-full",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"animate-spin"}),"Please wait"]}):"Login"}),o&&e.jsx("p",{className:"text-red-500 text-start mt-2",children:o})]})})},xs=({...s})=>{const{theme:t="system"}=Te();return e.jsx(ke,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground font-medium",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground font-medium"}},...s})},me=()=>{const{loading:s,error:t,success:r,handleGoogleLogin:a}=ds();return e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"outline",disabled:s,className:"w-full",onClick:a,children:s?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"animate-spin"}),"Please wait"]}):"Login with Google"}),e.jsx(xs,{}),t&&e.jsx("p",{className:"text-red-500 text-center",children:t}),r&&e.jsx("p",{className:"text-green-500",children:"Successful! Redirecting..."})]})},fs=({className:s,...t})=>e.jsx("div",{className:h("flex flex-col gap-6",s),...t,children:e.jsxs(B,{children:[e.jsx(H,{children:e.jsx(U,{className:"text-2xl",children:"Login"})}),e.jsxs(J,{children:[e.jsx("div",{children:e.jsx(ms,{})}),e.jsx("div",{className:"mt-6",children:e.jsx(me,{})})]})]})}),ps=()=>{const{control:s,handleSubmit:t,getValues:r,formState:{errors:a}}=F(),{loading:o,error:n,handleEmailSignup:c}=cs(),i=async l=>{await c(l)};return e.jsx("form",{onSubmit:t(i),children:e.jsxs("div",{className:"w-full grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(p,{name:"email",control:s,defaultValue:"",rules:{required:"Email is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,message:"Invalid email address"}},render:({field:l})=>e.jsx(f,{...l,id:"email",type:"email",placeholder:"m@example.com",required:!0})}),a.email&&e.jsx("p",{className:"text-red-500 text-sm",children:a.email.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"firstName",children:"First Name"}),e.jsx(p,{name:"firstName",control:s,render:({field:l})=>e.jsx(f,{...l,id:"firstName",type:"text",placeholder:"John",required:!0})}),a.firstName&&e.jsx("p",{className:"text-red-500 text-sm",children:a.firstName.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"lastName",children:"Last Name"}),e.jsx(p,{name:"lastName",control:s,render:({field:l})=>e.jsx(f,{...l,id:"lastName",type:"text",placeholder:"Doe",required:!0})}),a.lastName&&e.jsx("p",{className:"text-red-500 text-sm",children:a.lastName.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"password",children:"Password"}),e.jsx(p,{name:"password",control:s,defaultValue:"",rules:{required:"Password is required"},render:({field:l})=>e.jsx(f,{...l,id:"password",type:"password",required:!0})}),a.password&&e.jsx("p",{className:"text-red-500 text-sm",children:a.password.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(p,{name:"confirmPassword",control:s,defaultValue:"",rules:{required:"Please confirm your password",validate:l=>{const{password:u}=r();return l===u||"Passwords do not match"}},render:({field:l})=>e.jsx(f,{...l,id:"confirmPassword",type:"password",required:!0})}),a.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm text-start",children:a.confirmPassword.message})]}),e.jsx(N,{type:"submit",className:"w-full",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"animate-spin"}),"Please wait"]}):"Sign Up"}),n&&e.jsx("p",{className:"text-red-500 text-sm text-start mt-2",children:n})]})})},hs=({className:s,...t})=>e.jsx("div",{className:h("flex flex-col gap-6",s),...t,children:e.jsxs(B,{children:[e.jsx(H,{children:e.jsx(U,{className:"text-2xl",children:"Sign Up"})}),e.jsxs(J,{children:[e.jsx("div",{children:e.jsx(ps,{})}),e.jsx("div",{className:"mt-6",children:e.jsx(me,{})})]})]})});function js(){return e.jsx("div",{className:"flex min-h-full w-full items-center justify-center p-10 max-sm:p-4",children:e.jsx("div",{className:"w-full max-w-sm",children:e.jsxs(Le,{defaultValue:"login",className:"w-full",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-2",children:[e.jsx(z,{value:"login",children:"Log in"}),e.jsx(z,{value:"signup",children:"Sign up"})]}),e.jsx(q,{value:"login",children:e.jsx(fs,{})}),e.jsx(q,{value:"signup",children:e.jsx(hs,{})})]})})})}function Ps(){return e.jsxs("div",{children:[e.jsx(be,{}),e.jsx(js,{})]})}export{Ps as default};
